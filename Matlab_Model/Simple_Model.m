% 3 axis model

% x axis
Z_x = {[-3.64*10^5; -500.21; -35.88+400.76i; -35.88-400.76i; -30.46-336.23i; -30.46+336.23i; -27.47-249.8i; ...
    -27.47+249.8i; -10.78-223.56i; -10.78+223.56i; -14.06-195.13i; -14.06+195.13i; -10.59-169.44i; ...
    -10.59+169.44i; -8.83-124.71i; -8.83+124.71i; -5.33-106.87i; -5.33+106.87i; -3.36-83.93i; -3.36+83.93i]};
P_x = {[0; -69.73-459.64i; -69.73+459.64i; -30.53-378.98i; -30.53+378.98i; -32.59-297.99i; -32.59+297.99i; ...
    -21.14-239.36i; -21.14+239.36i; -10.64-220.02i; -10.64+220.02i; -10.67-192.24i; -10.67+192.24i; ...
    -10.45-141.63i; -10.45+141.63i; -8.52-119.75i; -8.52+119.75i; -6.05-86.78i; -6.05+86.78i; ...
    -12.02-79.09i; -12.02+79.09i]};
syscx = zpk(Z_x, P_x, 1);

Kp_x = 300;
Ki_x = 100;
Kd_x = 0.1;

tfP_x = tf(syscx);

C_x = pid(Kp_x,Ki_x,Kd_x);
T_x = feedback(tfP_x,C_x);

bode(syscx)

% y axis
Z_y = {[-148.20; -49.24-526.52i; -49.24+526.52i; -42.06-87.01i; -42.06+87.01i]};
P_y = {[0; -78.54-533.34i; -78.54+533.34i; -213.42-151.47i; -213.42+151.47i; -43.31-87.19i; -43.31+87.19i]};
syscy = zpk(Z_y, P_y, 1);
syscy = syscy*exp(tf([-0.000726 0],1))

bode(syscy,{0.1,1000})

% z axis
Z_z = {[-473.51; -119.02]};
P_z = {[0; -989.06; -266.22-157.81i; -266.22+157.81i]};
syscz = zpk(Z_z, P_z, 1);
syscz = syscz*exp(tf([-0.000746 0],1))

bode(syscz,{0.1,1000}) 